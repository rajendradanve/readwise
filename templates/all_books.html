{% extends "base.html" %}
{% block content %}

<div class="row  card-panel grey lighten-5">
  <div class="blue-grey darken-1">
    <form action="{{url_for('search')}}" class="col s12" method="post">
      <div class="row valign-wrapper">
        <div class="input-field col s12 m6 l8 offset-m3 offset-l3 center-align">
          <i class="fas fa-search prefix light-blue-text text-darken-4"></i>
          <input type="text" name="query" id="query" minlength="3" class="validate" required>
          <label for="query">Search</label>
        </div>
        <div class="col s12 m4 l4 center-align">
          <a href="{{url_for('all_books')}}" class="red btn text-shadow">Reset</a>
          <button type="submit" class="light-blue darken-1 btn text-shadow">
            <i class="fas fa-search left"></i>Search  
          </button>
        </div>
      </div>
    </form>
  </div>
  </div>

  {% if books | length > 0 %}
  <div class="row">
    {% for book in books %}
    <div class="col s12 m3">
      
      <div class="card center-align">
        <a href="{{url_for('book_detail', book_id=book._id)}}">
        <div class="card-image">

          <img id="book_image" src="{{book.image_url}}">
          
        </div>
        <div class="card-content">
          <span class="card-title black-text">{{book.name|truncate(30)}}</span>
          {% if book.avg_review == null %}
          <p class="grey-text"> No reviews yet</p>
          {% else %}
          {% for i in range(5)%}
              {% if book.avg_review > i %}
              <i id="stars-{{i}}" class="fas fa-star"></i>
              {% else%}
              <i id="stars-{{i}}" class="far fa-star"></i>
              {% endif %}
          {% endfor %}
          {% endif %}
          
        </div>
        
      </a>
      </div>
     
    </div>
    {% endfor %}
  </div>
  {% else %}
  <h4 class="red-text test-darken-4 center-align">No books found</h4>
  {% endif %}
  
  
{% endblock %}

